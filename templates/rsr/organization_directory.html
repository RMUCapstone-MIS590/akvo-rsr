{% extends "rsr/index_base.html" %}
{% load generic_content %}
{% load addparam %}

{% block title %}Akvo RSR - Organisation listing{% endblock title %}

{% block script %}
{{block.super}}
<script src="{{MEDIA_URL}}js/ui.tabs.pack.js" type="text/javascript"></script>
{% endblock script %}

{% block breadcrumbs %}
{{block.super}} &raquo; Organisation listing
{% endblock breadcrumbs %}

{% block page_id %}
<div id="page_project_directory">
{% endblock page_id %}

{% block outer_leftwing %}

<div id="outer_leftwing">

<div class="boxhead">
    <a name="list"></a>
    <div style="float:right; margin-top: 0.6em">
    <!--<label for="display_number_of_entries">Show</label>
    <select name='display_number_of_entries' class="select">
    <option value='25'>25</option>
    <option value='50'>50</option>
    <option value='75'>75</option>
    </select>
    results per page-->
    <span style="margin: 0 20px 0 20px">Organisations {{page.start_index}}-{{page.end_index}} of {{orgz.count}}</span>
    <span style="margin: 0 20px 0 20px">
        {% ifequal page.number 1 %}
        First |
        {% else %}
        <a href="{% url akvo.rsr.views.orglist %}{% addparam "page" 1 %}#list">First</a> |
        {% endifequal %}
        {% if page.has_previous %}
        <a href="{% url akvo.rsr.views.orglist %}{% addparam "page" page.previous_page_number %}#list">Previous</a> |
        {% else %}
        Previous |
        {% endif %}
        {% if page.has_next %}
        <a href="{% url akvo.rsr.views.orglist %}{% addparam "page" page.next_page_number %}#list">Next</a> |
        {% else %}
        Next |
        {% endif %}
        {% ifequal page.number page.paginator.num_pages %}
        Last
        {% else %}
        <a href="{% url akvo.rsr.views.orglist %}{% addparam "page" page.paginator.num_pages %}#list">Last</a>
        {% endifequal %}
    </span>
    </div>

    <h1>Organisation listing <span class="lightx2" style="font-weight:normal">({{orgz.count}} total)</span></h1>
</div> <!-- .boxhead -->

<div class="boxbody">

<table id="project_table">
<tr>
<th style="background-color: #999"><a href="{% url akvo.rsr.views.orglist %}{% addparam "order_by" "name" %}#list">Organization name</a></th>
<th><a href="{% url akvo.rsr.views.orglist %}{% addparam "order_by" "organization_type" %}#list">Type</a></th>
<th><a href="{% url akvo.rsr.views.orglist %}{% addparam "order_by" "country__country_name" %}#list">Country</a></th>
<th><a href="{% url akvo.rsr.views.orglist %}{% addparam "order_by" "country__continent" %}#list">Continent</a></th>
<th>Total projects</th>
<th>Funds requested</th>
<th>Funds still needed</th>
</tr>
{% for o in page.object_list %}
<tr>
	<td>
		
	
		{% if o.logo %}
            <a href="{% url akvo.rsr.views.orgdetail o.id %}">
			<img src="{{MEDIA_URL}}{{o.logo}}" alt="{{o.name}}" style="width: 100px; float:left; margin-right: 10px;" />
            </a>
		{% else %}
			<div style="background-color: #ccc; width: 100px; height: 75px; float:left; margin-right: 10px"></div>
		{% endif %}	

		<a href="{% url akvo.rsr.views.orgdetail o.id %}">{{o.name}}</a>
		<div class="lightx2 small">{{o.long_name}}</div>
		<div style="clear: left;">
		{% if o.field_partner %}
			 <img src="{{MEDIA_URL}}img/purple.png" alt="type" style="margin: 10px 5px 10px 0;" />
		 {% endif %}
		 {% if o.support_partner %}
			 <img src="{{MEDIA_URL}}img/blue.png" alt="type" style="margin: 10px 5px 10px 0;" />
		 {% endif %}
		 {% if o.funding_partner %}
			 <img src="{{MEDIA_URL}}img/orange.png" alt="type" style="margin: 10px 5px 10px 0;" />
		 {% endif %}
	 	</div>
	</td>
	<td>{{o.show_organization_type}}</td>
	<td>{{o.country}}</td>
	<td>{{o.country.get_continent_display}}</td>
	<td>
		<a href="{% url akvo.rsr.views.filteredprojectlist o.id %}#list">{{o.projects.count}}</a><br />
	</td>
	<td>
		{% ifequal o.funding.still_needed 0 %}
			<span style="color: green">
		{% else %}
			<span>
		{% endifequal %}
		<b>&#8364; {{o.funding.total}}</b>
		</span>
	</td>
	<td>
		{% ifequal o.funding.still_needed 0 %}
			<span>
		{% else %}
			<span style="color: red">
		{% endifequal %}
		<b>&#8364; {{o.funding.still_needed}}</b>
		</span>
	</td>
</tr>

{% endfor %}

<tr>
	<td colspan="9">
		<div style="text-align: right"
			<!--<label for="display_number_of_entries">Show</label>
			<select name='display_number_of_entries' class="select">
				<option value='25'>25</option>
				<option value='50'>50</option>
				<option value='75'>75</option>
			</select>
			results per page-->
            <span style="margin: 0 20px 0 20px">Organisations {{page.start_index}}-{{page.end_index}} of {{orgz.count}}</span>
            <span style="margin: 0 20px 0 20px">
                {% ifequal page.number 1 %}
                First |
                {% else %}
                <a href="{% url akvo.rsr.views.orglist %}{% addparam "page" 1 %}#list">First</a> |
                {% endifequal %}
                {% if page.has_previous %}
                <a href="{% url akvo.rsr.views.orglist %}{% addparam "page" page.previous_page_number %}#list">Previous</a> |
                {% else %}
                Previous |
                {% endif %}
                {% if page.has_next %}
                <a href="{% url akvo.rsr.views.orglist %}{% addparam "page" page.next_page_number %}#list">Next</a> |
                {% else %}
                Next |
                {% endif %}
                {% ifequal page.number page.paginator.num_pages %}
                Last
                {% else %}
                <a href="{% url akvo.rsr.views.orglist %}{% addparam "page" page.paginator.num_pages %}#list">Last</a>
                {% endifequal %}
            </span>
		</div>
	</td>
</tr>
</table>

</div> <!-- .boxbody -->

</div> <!-- #outer_leftwing -->
{% endblock outer_leftwing %}

{% block projects %}


{% endblock projects %}

