{% extends "base.html" %}

{% load compressed i18n %}

{% block title %}{{project.title}}{% endblock %}

{% block head_js %}
    <script type="application/json" id="accordion-data">{{ accordion_data|safe }}</script>
    <script type="application/json" id="carousel-data">{{ carousel_data|safe }}</script>

    <!-- Timeline -->
    <link rel="stylesheet" type="text/css" href="http://cdn.knightlab.com/libs/timeline/latest/css/timeline.css">
    <script type="text/javascript" src="http://cdn.knightlab.com/libs/timeline/latest/js/storyjs-embed.js"></script>

    <script>
        $(document).ready(function() {
            var timeline_data = {{ timeline_data|safe }}

            createStoryJS({
                type:       'timeline',
                width:      '100%',
                height:     '400',
                source:     timeline_data,
                embed_id:   'timeline'
            });
        });
    </script>
{% endblock %}

{% block maincontent %}

<article class="touch-navbar project-container">
    {% include "partials/project_header.html" %}

    <div class="container">
        {% if not project.is_published %}
            <div id="draft" class="row">This is a draft view of the project. It can only be seen by Administrators and Project editors.</div>
        {% endif %}
        <div class="row">
            <div class="col-sm-8">
                <div id="carousel"></div>
            </div>
            <div class="col-sm-4">
                <p>{{project.project_plan_summary}}</p>
                <p><span class="detailedInfo">IATI ID</span> 12345</p>
                <p><span class="detailedInfo">Status</span> {{project.get_status_display}}</p>
                {% if project.has_relations %}
                <p><span class="detailedInfo">Hierarchy</span>
                    This project has {{project.parents.count}} parent project{{project.parents.count|pluralize}},
                    {{project.children.count}} child project{{project.children.count|pluralize}} and
                    {{project.siblings.count}} sibling project{{project.siblings.count|pluralize}}
                    <a href="{% url 'project-hierarchy' project.pk %}">View full hierarchy</a></p>
                {% endif %}
                <p><a href="#">View project's full data report</a></p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-3 col-xs-6 col-ty-12">
                <h4 class="detailedInfo">Focus Areas</h4>
                <p><a href="#">Water and sanitation</a></p>
            </div>
            <div class="col-sm-3 col-xs-6 col-ty-12">
                <h4 class="detailedInfo">Sectors</h4>
                <p>Education <a href="#" class="small">+4 more</a></p>
            </div>
            <div class="col-sm-3 col-xs-6 col-ty-12">
                <h4 class="detailedInfo">Partners</h4>
                <div class="media">
                    <a href="#" class="pull-left">
                        <img src="http://placehold.it/80x60">
                    </a>
                    <div class="media-body">
                        <p><a href="#">{{project.partners.all.0}}</a></p>
                    </div>
                </div>
                <p class="center-text"><a href="#">+{{project.partners.count|add:"-1"}} more</a></p>
            </div>
            <div class="col-sm-3 col-xs-6 col-ty-12">
                <h4 class="detailedInfo">Finance</h4>
                {% include "partials/project_budget.html" %}
                <p class="center-text"><a href="#">See all financial info</a></p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div id="timeline"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-8">
              <div id="accordion"></div>
              {% compressed_js 'rsr_v3_react_project_main' %}
              {% comment %}
              <script type="application/javascript" src="/static/rsr/v3/js/build/rsr_v3_project_main.min.js" charset="utf-8"></script>
              {% endcomment %}
            </div>
            <div class="col-sm-4">
              <h4 class="detailedInfo">Latest project updates</h4>
              {% for update in updates%}
              <a href="{{update.get_absolute_url}}">{{update.title}}</a>
              {% endfor %}

              <p>Updates</p>


            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                COMMENTS
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 col-xs-4 col-ty-12">
                FOOTER SECTION
            </div>
            <div class="col-sm-4 col-xs-4 col-ty-12">
                FOOTER SECTION
            </div>
            <div class="col-sm-4 col-xs-4 col-ty-12">
                FOOTER SECTION
            </div>
        </div>
    </div>
</article>

{% endblock %}
