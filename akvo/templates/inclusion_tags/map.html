{% load google_maps i18n l10n %}

<div class="akvo_map" id="akvoMaps_12345" style="width:{{width}}px;height:{{height}}px;"></div>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
  akvoMaps_12345 = {
    "type": "{{type}}",
    "objectId": {{object.id}},
    "Lat": {{object.primary_location.latitude|unlocalize}},
    "Lng": {{object.primary_location.longitude|unlocalize}},
    "zoom": {{zoom}}
  }
</script>


{% comment %}
<script type="text/javascript"> 

//   var akvoMap = {
//     getLocations: function() {
//       var resouceUrl= "http://akvo.dev/api/v1/project_location/?format=jsonp&project=436";

//       $.getJSON(resouceUrl + "?callback=", function(data) {
//         $.each(data.objects, function(i, location) {
//           console.log(location.city);
//         });
//       });
//     }
//   };
  
//   window.onload = function() {
//     akvoMap.getLocations()
//   };
// </script>
{% endcomment %}



{% comment %}
{# <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> #}
{# <script src="http://akvo.dev/rsr/media/core/js/jquery.ui.map.full.min.js" type="text/javascript"></script> #}
<script type="text/javascript">
  jQuery = window.jQuery.noConflict(true);
  jQuery(document).ready(function($) {
    var map = jQuery('#map_canvas');

    map.gmap(mapOptions).bind('init', function() {
      $.getJSON('http://akvo.dev/api/v1/project_location/?format=jsonp&project=436?callback=?', function(data) {
        $.each(data.projects, function(i, location) {
          console.log(location.city);
        });
      });
    });
  });

  var mapOptions = {}
  // http://www.akvo.org/api/v1/project_location/?format=jsonp&project=436
  document.write("In the map");
</script>
{% endcomment %}